]<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBA Admission - Global College of Engineering & Technology</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- jsPDF and html2canvas for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* CSS Variables from Sooper Store */
        :root {
            --primary: #28a745; /* Green */
            --primary-light: #5cb85c;
            --primary-dark: #218838;
            --secondary: #98cce0; /* Light Blue */
            --dark: #333;
            --light: #f8f9fa;
            --danger: #dc3545; /* Red */
            --success: #28a745; /* Green */
            --warning: #ffc107; /* Yellow */
            --blue-college: #0d4a96; /* Darker Blue */
            --blue-college-light: #1a6fc9; /* Lighter Blue */
        }

        /* General styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif; /* Using Inter font */
        }

        body {
            background: linear-gradient(135deg, var(--blue-college) 0%, var(--blue-college-light) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .container {
            background: white;
            border-radius: 20px; /* More rounded */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25); /* Deeper shadow */
            width: 100%;
            max-width: 960px; /* Increased max-width */
            overflow: hidden;
            position: relative;
        }

        /* Header styling */
        .header {
            background: linear-gradient(90deg, var(--blue-college) 0%, var(--blue-college-light) 100%);
            color: white;
            padding: 40px 30px; /* More padding */
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
        }

        .logo-icon-circle {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .logo-icon-circle i {
            font-size: 45px;
            color: var(--blue-college);
        }

        .logo-text {
            text-align: left;
        }

        .logo-text h1 {
            font-size: 28px;
            font-weight: 800;
            line-height: 1.2;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }

        .logo-text p {
            font-size: 16px;
            opacity: 0.95;
            margin-top: 8px;
        }

        .title {
            font-size: 38px;
            font-weight: 800;
            margin: 25px 0 20px;
            position: relative;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.15);
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: var(--warning); /* Brighter yellow accent */
            border-radius: 3px;
        }

        .subtitle {
            font-size: 20px;
            margin-top: 15px;
            opacity: 0.9;
        }

        /* Content area */
        .content {
            padding: 40px;
        }

        /* Eligibility Section */
        .eligibility {
            background: #e6f7ff; /* Lighter blue background */
            border-left: 5px solid var(--success); /* Green accent border */
            padding: 25px;
            margin-bottom: 35px; /* More space */
            border-radius: 10px; /* Rounded corners */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Subtle shadow */
        }

        .eligibility h3 {
            color: var(--success);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 22px;
            font-weight: 700;
        }

        .eligibility ul {
            padding-left: 25px;
            list-style: disc; /* Ensure disc bullets */
        }

        .eligibility li {
            margin-bottom: 10px;
            font-size: 17px;
            line-height: 1.6;
            color: var(--dark);
        }

        /* Form styling */
        .section-title {
            font-size: 24px; /* Larger section titles */
            color: var(--blue-college);
            margin: 35px 0 20px; /* More vertical spacing */
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 25px; /* More space between groups */
        }

        .form-row {
            display: flex;
            gap: 25px; /* Increased gap */
            margin-bottom: 25px;
        }

        .form-col {
            flex: 1;
        }

        label {
            display: block;
            margin-bottom: 10px; /* More space below label */
            font-weight: 600;
            color: var(--dark);
            font-size: 16px;
        }

        .required:after {
            content: " *";
            color: var(--danger); /* Red for required fields */
        }

        input, select, textarea {
            width: 100%;
            padding: 15px 18px; /* Larger padding */
            border: 1px solid #ced4da; /* Softer border */
            border-radius: 10px; /* More rounded */
            font-size: 17px; /* Larger font */
            transition: all 0.3s ease;
            color: var(--dark);
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--blue-college-light);
            box-shadow: 0 0 0 4px rgba(26, 111, 201, 0.25); /* More prominent focus shadow */
            outline: none;
        }

        /* Photo upload */
        .photo-upload {
            display: flex;
            align-items: center;
            gap: 40px; /* More space */
            margin: 35px 0;
            padding: 30px;
            border: 2px dashed #a0c4ff;
            border-radius: 15px;
            background: #f8fbff;
        }

        .photo-preview {
            width: 160px;
            height: 190px;
            background: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .photo-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
        }

        .photo-preview i {
            font-size: 50px;
            color: #adb5bd;
        }

        .upload-instructions {
            flex: 1;
            text-align: left;
        }

        .upload-instructions p {
            margin-bottom: 12px;
            font-size: 16px;
            color: #555;
            line-height: 1.6;
            font-weight: 500;
        }

        .upload-instructions ul {
            padding-left: 25px;
            margin: 15px 0;
            list-style: disc;
        }

        .upload-instructions li {
            margin-bottom: 8px;
            font-size: 15px;
            color: #444;
        }

        /* Exam details */
        .exam-section {
            background: #f0f7ff;
            padding: 30px;
            border-radius: 15px;
            margin: 35px 0;
            border: 1px solid #d0e4ff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .exam-section .form-row {
            margin-top: 20px;
        }

        /* Specialization section */
        .specialization {
            background: #f9f7ff;
            padding: 30px;
            border-radius: 15px;
            margin: 35px 0;
            border: 1px solid #e0d7ff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .specialization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .specialization-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #fff;
        }

        .specialization-option:hover {
            border-color: var(--blue-college-light);
            background: #e6f7ff;
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        .specialization-option input[type="radio"] {
            width: auto;
            margin-right: 15px;
            transform: scale(1.3);
            cursor: pointer;
        }

        /* Fee Payment Section - Adapted from Sooper Store */
        .fee-payment-section {
            background: #e0ffe0 url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="40" fill="none" stroke="%23c3e6cb" stroke-width="2"/></svg>') repeat;
            border: 1px solid #a8e6a8;
            padding: 30px;
            border-radius: 15px;
            margin: 35px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .payment-summary {
            flex: 1;
            min-width: 300px;
            background: var(--light);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .summary-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--dark);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
            position: relative;
        }

        .summary-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--primary);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .summary-item:hover {
            transform: translateX(5px);
        }

        .summary-total {
            font-weight: bold;
            font-size: 26px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid var(--secondary);
            display: flex;
            justify-content: space-between;
            color: var(--primary-dark);
            animation: pulse 2s infinite;
        }

        .payment-options-container {
            flex: 2;
            min-width: 300px;
        }

        .payment-methods {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .method-btn {
            flex: 1;
            padding: 20px 15px;
            border: 2px solid #ddd;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease-in-out;
            font-weight: 500;
            transform: scale(1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .method-btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .method-btn.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.2), rgba(40, 167, 69, 0.1));
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
        }

        .method-icon {
            font-size: 38px;
            margin-bottom: 10px;
            transition: all 0.3s ease-in-out;
            color: #666;
        }

        .method-btn.active .method-icon {
            transform: scale(1.2) rotate(5deg);
            color: var(--primary);
        }

        .payment-details-content {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .payment-form {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease;
        }

        .payment-form.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .upi-qr-container {
            text-align: center;
            padding: 20px;
        }

        .upi-qr-container h3 {
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 18px;
        }

        .qr-code {
            background: white;
            padding: 25px;
            border-radius: 15px;
            display: inline-block;
            margin: 15px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 2px solid var(--primary-light);
            transition: all 0.3s;
        }
        
        .qr-code img {
            width: 200px;
            height: 200px;
            display: block;
            margin: 0 auto;
            border: 3px solid var(--primary);
            border-radius: 8px;
        }

        .qr-code:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .qr-instructions {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            font-size: 15px;
            color: #2e7d32;
            text-align: left;
            transition: all 0.3s;
            border: 1px solid var(--success);
        }

        .qr-instructions:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .qr-instructions ol {
            padding-left: 25px;
            margin-top: 15px;
        }

        .qr-instructions li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 20px;
        }

        .qr-instructions li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--primary);
            font-weight: bold;
        }

        .qr-instructions p {
            margin-bottom: 10px;
        }

        .payment-status {
            margin-top: 20px;
            padding: 25px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            display: none;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .payment-status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .payment-status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-icon {
            font-size: 70px;
            margin-bottom: 25px;
            display: inline-block;
        }

        .status-success .status-icon {
            color: var(--success);
            animation: bounceIn 0.8s;
        }

        .status-pending .status-icon {
            color: var(--warning);
            animation: pulse 1.5s infinite;
        }

        .status-error .status-icon {
            color: var(--danger);
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(40, 167, 69, 0); }
            100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); }
        }
        @keyframes bounceIn {
            0% { transform: scale(0.1); opacity: 0; }
            60% { transform: scale(1.3); opacity: 1; }
            100% { transform: scale(1); }
        }


        .receipt-upload-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
            display: none;
        }

        .receipt-upload-section label {
            font-size: 16px;
            margin-bottom: 10px;
        }

        /* New styles for receipt preview */
        .receipt-preview-container {
            display: flex;
            align-items: center;
            gap: 40px;
            margin: 20px 0;
            padding: 30px;
            border: 2px dashed #a0c4ff;
            border-radius: 15px;
            background: #f8fbff;
            display: none;
        }

        .receipt-preview {
            width: 160px;
            height: 190px;
            background: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .receipt-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
        }

        .receipt-preview i {
            font-size: 50px;
            color: #adb5bd;
        }
        .receipt-preview-text {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }


        /* Buttons */
        .btn {
            display: inline-block;
            background: linear-gradient(90deg, var(--blue-college) 0%, var(--blue-college-light) 100%);
            color: white;
            padding: 16px 35px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            margin-top: 10px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .btn:hover {
            background: linear-gradient(90deg, #0a3a7a 0%, #155aa0 100%);
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: #e9ecef;
            color: var(--dark);
            margin-left: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary:hover {
            background: #dee2e6;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .form-note {
            margin-top: 30px;
            padding: 20px;
            background: var(--warning);
            border-radius: 10px;
            border-left: 5px solid var(--warning);
            font-size: 15px;
            color: #856404;
        }

        .form-note p {
            margin-bottom: 10px;
            font-weight: 600;
        }

        .form-note ul {
            padding-left: 25px;
            margin: 15px 0;
            list-style: disc;
        }

        .form-note li {
            margin-bottom: 8px;
            font-size: 15px;
        }

        /* Contact Info */
        .contact-info {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #f0f0f0;
            color: #555;
        }

        .contact-info p {
            margin: 12px 0;
            font-size: 17px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .contact-info i {
            color: var(--blue-college);
            margin-right: 12px;
            width: 25px;
            text-align: center;
        }

        .success-message {
            text-align: center;
            padding: 60px 30px;
            display: none;
        }

        .success-message i {
            font-size: 80px;
            color: var(--success);
            margin-bottom: 30px;
        }

        .success-message h2 {
            font-size: 36px;
            color: var(--blue-college);
            margin-bottom: 20px;
        }

        .success-message p {
            font-size: 19px;
            margin-bottom: 30px;
            line-height: 1.7;
        }

        /* Application Receipt */
        .application-receipt {
            display: none;
            margin-top: 40px;
            padding: 40px;
            background: #f9fbfd;
            border-radius: 15px;
            border: 1px solid #d1e7ff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        .receipt-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }

        .receipt-header h2 {
            font-size: 32px;
            color: var(--blue-college);
            margin-bottom: 10px;
        }

        .receipt-header h3 {
            font-size: 24px;
            color: var(--success);
            margin-bottom: 15px;
        }

        .receipt-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 35px;
        }

        .receipt-section {
            margin-bottom: 35px;
        }

        .receipt-section-title {
            font-size: 20px;
            color: var(--blue-college);
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 2px solid #eaeaea;
            font-weight: 700;
        }

        .receipt-row {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #e0e0e0;
        }

        .receipt-label {
            font-weight: 600;
            width: 40%;
            color: #555;
        }

        .receipt-value {
            width: 60%;
            font-weight: 500;
            color: var(--dark);
        }

        .payment-details {
            background: #e6f7ff;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            border-left: 4px solid var(--blue-college);
        }

        .payment-details .receipt-row {
            border-bottom: none;
            padding-bottom: 0;
        }

        .receipt-footer {
            margin-top: 40px;
            padding-top: 25px;
            border-top: 2px solid #eee;
            text-align: center;
            color: #666;
            font-size: 15px;
        }

        .signature-area {
            margin-top: 30px;
            padding-top: 20px;
            text-align: right;
        }

        .signature-line {
            display: inline-block;
            width: 250px;
            border-top: 1px solid #999;
            margin-top: 60px;
            padding-top: 10px;
            text-align: center;
            color: #555;
        }

        /* Multi-step form specific styles */
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 15px;
            background-color: var(--success);
            width: 0%;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        .step-indicators {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .step-indicator {
            flex: 1;
            text-align: center;
            padding: 10px 0;
            color: #888;
            font-weight: 600;
            position: relative;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .step-indicator.active {
            color: var(--blue-college);
        }

        .step-indicator.completed {
            color: var(--success);
        }

        .step-indicator::before {
            content: attr(data-step);
            display: block;
            width: 30px;
            height: 30px;
            line-height: 30px;
            border-radius: 50%;
            background-color: #ccc;
            color: white;
            margin: 0 auto 10px;
            font-size: 14px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .step-indicator.active::before {
            background-color: var(--blue-college);
        }

        .step-indicator.completed::before {
            background-color: var(--success);
            content: '✓';
            font-size: 18px;
        }

        .form-step {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .form-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }

        .navigation-buttons .btn {
            margin-top: 0;
        }

        .navigation-buttons .btn-prev {
            background: #6c757d;
        }

        .navigation-buttons .btn-prev:hover {
            background: #5a6268;
        }

        /* Custom Message Box Styles */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .message-box-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .message-box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .message-box-overlay.active .message-box {
            transform: translateY(0);
        }

        .message-box h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--blue-college);
        }

        .message-box p {
            font-size: 16px;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .message-box .btn {
            padding: 10px 25px;
            font-size: 16px;
            margin-top: 0;
        }

        .message-box.error h3 {
            color: var(--danger);
        }
        .message-box.warning h3 {
            color: var(--warning);
        }


        /* Responsive design */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .logo {
                flex-direction: column;
                text-align: center;
            }
            
            .logo-icon-circle {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .logo-text h1 {
                font-size: 22px;
            }

            .title {
                font-size: 32px;
            }

            .content {
                padding: 30px 20px;
            }
            
            .photo-upload {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .exam-section .form-row, 
            .specialization-grid,
            .payment-methods {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn-secondary {
                margin-left: 0;
                margin-top: 15px;
            }
            
            .specialization-grid {
                grid-template-columns: 1fr;
            }

            .contact-info p {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .contact-info i {
                margin-right: 0;
                margin-bottom: 5px;
            }

            .step-indicators {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .step-indicator {
                flex-basis: 45%;
                margin-bottom: 10px;
            }
        }
        @media (max-width: 480px) {
            .container {
                border-radius: 15px;
            }
            .header {
                padding: 25px 15px;
            }
            .logo-icon-circle {
                width: 60px;
                height: 60px;
            }
            .logo-icon-circle i {
                font-size: 35px;
            }
            .logo-text h1 {
                font-size: 18px;
            }
            .logo-text p {
                font-size: 13px;
            }
            .title {
                font-size: 28px;
            }
            .subtitle {
                font-size: 16px;
            }
            .content {
                padding: 25px 15px;
            }
            .eligibility h3 {
                font-size: 20px;
            }
            .eligibility li {
                font-size: 15px;
            }
            .section-title {
                font-size: 20px;
            }
            input, select, textarea {
                padding: 12px 15px;
                font-size: 16px;
            }
            .photo-upload {
                padding: 20px;
            }
            .photo-preview {
                width: 140px;
                height: 170px;
            }
            .photo-preview i {
                font-size: 40px;
            }
            .upload-instructions p {
                font-size: 14px;
            }
            .upload-instructions li {
                font-size: 13px;
            }
            .specialization-option {
                padding: 12px;
            }
            .specialization-option input[type="radio"] {
                transform: scale(1.1);
            }
            .fee-payment-section {
                padding: 25px;
            }
            .fee-summary p {
                font-size: 16px;
            }
            .payment-info p {
                font-size: 15px;
            }
            .payment-option-btn {
                padding: 10px 20px;
                font-size: 15px;
            }
            .btn {
                padding: 14px 25px;
                font-size: 16px;
            }
            .form-note {
                padding: 15px;
                font-size: 14px;
            }
            .form-note li {
                font-size: 14px;
            }
            .contact-info p {
                font-size: 14px;
            }
            .step-indicator {
                flex-basis: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon-circle">
                    <i class="fas fa-graduation-cap" style="font-size: 40px; color: var(--blue-college);"></i>
                </div>
                <div class="logo-text">
                    <h1>GLOBAL COLLEGE OF ENGINEERING & TECHNOLOGY, KADAPA</h1>
                    <p>Approved by AICTE, New Delhi & Affiliated to JNTUA, Anantapur</p>
                </div>
            </div>
            <h2 class="title">MBA Admission Form 2025-26</h2>
            <p class="subtitle">Complete your pre-booking application for the Master of Business Administration Program.</p>
        </div>
        <div class="content">
            <div class="eligibility">
                <h3><i class="fas fa-check-circle"></i> MBA Eligibility Criteria</h3>
                <ul>
                    <li><strong>Academic Qualification:</strong> Bachelor's Degree in any discipline with a minimum of 50% aggregate (45% for SC/ST) from a recognized university.</li>
                    <li><strong>Entrance Exam:</strong> Valid score in a state or national level management entrance exam like CAT, MAT, XAT, GMAT, CMAT, ATMA, ICET, etc. is required for admission.</li>
                    <li><strong>Age Limit:</strong> No age limit.</li>
                    <li><strong>Documents:</strong> 10th, 12th, and Bachelor's Degree mark sheets, Entrance Exam Score Card, Transfer Certificate (TC), Conduct Certificate (CC).</li>
                    <li><strong>Specializations:</strong> Finance, Marketing, Human Resources, Operations, Business Analytics.</li>
                </ul>
            </div>
            <!-- Progress Bar and Step Indicators -->
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="step-indicators" id="stepIndicators">
                <div class="step-indicator active" data-step="1">Personal & Academic Info</div>
                <div class="step-indicator" data-step="2">Specialization & Exam</div>
                <div class="step-indicator" data-step="3">Upload & Payment</div>
                <div class="step-indicator" data-step="4">Receipt</div>
            </div>
            <form id="mbaAdmissionForm">
                <!-- Step 1: Personal Information & Academic Information -->
                <div id="step-1" class="form-step active">
                    <h3 class="section-title">Personal Information</h3>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="fullName" class="required">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required placeholder="Enter your full name">
                        </div>
                        <div class="form-col">
                            <label for="dob" class="required">Date of Birth</label>
                            <input type="date" id="dob" name="dob" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="fatherName" class="required">Father's Name</label>
                            <input type="text" id="fatherName" name="fatherName" required placeholder="Enter father's name">
                        </div>
                        <div class="form-col">
                            <label for="motherName" class="required">Mother's Name</label>
                            <input type="text" id="motherName" name="motherName" required placeholder="Enter mother's name">
                        </div>
                    </div>
                    <h3 class="section-title">Academic Information (Undergraduate Degree)</h3>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="degreeCollege" class="required">Degree College Name</label>
                            <input type="text" id="degreeCollege" name="degreeCollege" required placeholder="Enter degree college name">
                        </div>
                        <div class="form-col">
                            <label for="degreeUniversity" class="required">University</label>
                            <input type="text" id="degreeUniversity" name="degreeUniversity" required placeholder="Enter university name">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="degreePercentage" class="required">Degree Percentage</label>
                            <input type="number" id="degreePercentage" name="degreePercentage" min="0" max="100" step="0.01" required placeholder="Enter percentage">
                        </div>
                        <div class="form-col">
                            <label for="degreeYear" class="required">Year of Passing (Degree)</label>
                            <select id="degreeYear" name="degreeYear" required>
                                <option value="">Select Year</option>
                                <option value="2022">2022</option>
                                <option value="2023">2023</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="degreeStream" class="required">Undergraduate Stream</label>
                            <input type="text" id="degreeStream" name="degreeStream" required placeholder="e.g., B.Com, BBA, B.Tech">
                        </div>
                        <div class="form-col">
                            <label for="intermediatePercentage" class="required">Intermediate (10+2) Percentage</label>
                            <input type="number" id="intermediatePercentage" name="intermediatePercentage" min="0" max="100" step="0.01" required placeholder="Enter 10+2 percentage">
                        </div>
                    </div>
                    <h3 class="section-title">Contact Information</h3>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" name="email" required placeholder="Enter your email">
                        </div>
                        <div class="form-col">
                            <label for="phone" class="required">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="address" class="required">Permanent Address</label>
                        <textarea id="address" name="address" rows="3" required placeholder="Enter your full address"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <label for="city" class="required">City</label>
                            <input type="text" id="city" name="city" required placeholder="Enter your city">
                        </div>
                        <div class="form-col">
                            <label for="state" class="required">State</label>
                            <input type="text" id="state" name="state" required placeholder="Enter your state">
                        </div>
                        <div class="form-col">
                            <label for="pincode" class="required">Pincode</label>
                            <input type="text" id="pincode" name="pincode" required placeholder="Enter pincode">
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-prev" style="visibility: hidden;">Previous</button>
                        <button type="button" class="btn btn-next">Next</button>
                    </div>
                </div>
                <!-- Step 2: Specialization Preference & Admission Type/Entrance Exam Details -->
                <div id="step-2" class="form-step">
                    <h3 class="section-title">Specialization Preference</h3>
                    <div class="specialization">
                        <p>Select your preferred MBA specialization:</p>
                        <div class="specialization-grid">
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="finance" required> Finance
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="marketing"> Marketing
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="hr"> Human Resources
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="operations"> Operations Management
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="business_analytics"> Business Analytics
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="it_management"> IT Management
                            </label>
                            <label class="specialization-option">
                                <input type="radio" name="specialization" value="other"> Other
                            </label>
                        </div>
                    </div>
                    <h3 class="section-title">Admission Type & Entrance Exam Details</h3>
                    <div class="exam-section">
                        <div class="form-group">
                            <label class="required">Select Admission Type:</label>
                            <div class="specialization-grid">
                                <label class="specialization-option">
                                    <input type="radio" name="admissionType" value="qualified" id="admissionTypeQualified" required checked> Entrance Exam Qualified
                                </label>
                                <label class="specialization-option">
                                    <input type="radio" name="admissionType" value="paid" id="admissionTypePaid"> Paid Admission (Management Quota)
                                </label>
                            </div>
                        </div>
                        <div id="entranceExamDetails" style="display: block;">
                            <div class="form-row">
                                <div class="form-col">
                                    <label for="examName" class="required">Entrance Exam</label>
                                    <select id="examName" name="examName" required>
                                        <option value="">Select Exam</option>
                                        <option value="cat">CAT</option>
                                        <option value="mat">MAT</option>
                                        <option value="xat">XAT</option>
                                        <option value="gmat">GMAT</option>
                                        <option value="cmat">CMAT</option>
                                        <option value="atma">ATMA</option>
                                        <option value="icet">ICET</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-col">
                                    <label for="examYear" class="required">Exam Year</label>
                                    <select id="examYear" name="examYear" required>
                                        <option value="">Select Year</option>
                                        <option value="2024">2024</option>
                                        <option value="2025">2025</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-col">
                                    <label for="rank" class="required">Rank/Percentile</label>
                                    <input type="text" id="rank" name="rank" required placeholder="Enter your rank/percentile">
                                </div>
                                <div class="form-col">
                                    <label for="score" class="required">Score</label>
                                    <input type="number" id="score" name="score" min="0" step="0.01" required placeholder="Enter your score">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-prev">Previous</button>
                        <button type="button" class="btn btn-next">Next</button>
                    </div>
                </div>
                <!-- Step 3: Upload Documents & Pre-Booking Fee Payment -->
                <div id="step-3" class="form-step">
                    <h3 class="section-title">Upload Documents</h3>
                    <div class="photo-upload">
                        <div class="photo-preview">
                            <img id="photoPreview" src="" alt="Photo Preview">
                            <i class="fas fa-camera"></i>
                            <span id="photoText">Upload Photo</span>
                        </div>
                        <div class="upload-instructions">
                            <p>Please upload a recent passport-size photograph.</p>
                            <ul>
                                <li><strong>Format:</strong> JPG, JPEG, PNG</li>
                                <li><strong>Max Size:</strong> 2MB</li>
                                <li><strong>Dimensions:</strong> 3.5cm x 4.5cm preferred</li>
                            </ul>
                            <input type="file" id="photoUpload" name="photoUpload" accept="image/jpeg,image/png" required>
                        </div>
                    </div>
                    <h3 class="section-title">Pre-Booking Fee Payment</h3>
                    <div class="fee-payment-section">
                        <div class="payment-summary">
                            <h2 class="summary-title">Payment Summary</h2>
                            <div class="summary-item">
                                <span>Pre-Booking Fee</span>
                                <span>₹1,000.00</span>
                            </div>
                            <div class="summary-total">
                                <span>Total Amount</span>
                                <span id="totalAmount">₹1,000.00</span>
                            </div>
                        </div>
                        <div class="payment-options-container">
                            <h3 class="section-title" style="margin-top: 0; border-bottom: none; padding-bottom: 0;">Select Payment Method</h3>
                            <div class="payment-methods">
                                <button type="button" class="method-btn active" data-target="upi-qr">
                                    <i class="fas fa-qrcode method-icon"></i>
                                    UPI QR Code
                                </button>
                                <button type="button" class="method-btn" data-target="card-payment-form">
                                    <i class="fas fa-credit-card method-icon"></i>
                                    Credit/Debit Card
                                </button>
                            </div>
                            <div class="payment-details-content">
                                <div class="payment-form active" id="upi-qr">
                                    <div class="upi-qr-container">
                                        <h3>Scan & Pay with any UPI App</h3>
                                        <div class="qr-code">
                                            <!-- This image will be dynamically updated by JavaScript -->
                                            <img id="dynamic-qr-code" src="" alt="UPI QR Code">
                                        </div>
                                        <div class="qr-instructions">
                                            <p><strong>Important:</strong> After successful payment, please upload the receipt/screenshot to proceed.</p>
                                            <ol>
                                                <li>Open your preferred UPI app (Google Pay, PhonePe, Paytm, etc.).</li>
                                                <li>Tap on 'Scan any QR code' and scan the code above.</li>
                                                <li>The amount ₹<span id="qr-amount-display">1,000.00</span> will be automatically filled.</li>
                                                <li>Just enter your UPI PIN to complete payment.</li>
                                                <li>Save the payment receipt/screenshot.</li>
                                            </ol>
                                        </div>
                                        <button type="button" class="btn" onclick="simulatePayment()">I have paid (Simulate)</button>
                                    </div>
                                    <div class="receipt-upload-section">
                                        <label for="receiptUpload">Upload Payment Receipt/Screenshot</label>
                                        <input type="file" id="receiptUpload" name="receiptUpload" accept="image/*,application/pdf" required>
                                        <div class="receipt-preview-container">
                                            <div class="receipt-preview">
                                                <img id="receiptPreview" src="" alt="Receipt Preview">
                                                <i class="fas fa-file-upload"></i>
                                                <span class="receipt-preview-text">Upload Receipt</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="payment-form" id="card-payment-form">
                                    <h2 style="margin-bottom: 20px;">Pay with Credit/Debit Card</h2>
                                    <div class="form-group">
                                        <label for="card-number">Card Number</label>
                                        <input type="text" id="card-number" placeholder="XXXX XXXX XXXX XXXX" maxlength="19">
                                    </div>
                                    <div class="form-group">
                                        <label for="card-name">Cardholder Name</label>
                                        <input type="text" id="card-name" placeholder="John Doe">
                                    </div>
                                    <div style="display: flex; gap: 15px;">
                                        <div class="form-group" style="flex: 1;">
                                            <label for="expiry">Expiry Date</label>
                                            <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
                                        </div>
                                        <div class="form-group" style="flex: 1;">
                                            <label for="cvv">CVV</label>
                                            <input type="text" id="cvv" placeholder="XXX" maxlength="4">
                                        </div>
                                    </div>
                                    <button type="button" class="btn" onclick="simulatePayment('card')">Pay with Card</button>
                                    <p style="font-size: 14px; color: #666; margin-top: 10px;">(Card details are for simulation only and will not be processed)</p>
                                    <div class="receipt-upload-section">
                                        <label for="receiptUploadCard">Upload Payment Receipt/Screenshot</label>
                                        <input type="file" id="receiptUploadCard" name="receiptUploadCard" accept="image/*,application/pdf" required>
                                        <div class="receipt-preview-container">
                                            <div class="receipt-preview">
                                                <img id="receiptPreviewCard" src="" alt="Receipt Preview">
                                                <i class="fas fa-file-upload"></i>
                                                <span class="receipt-preview-text">Upload Receipt</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-note">
                                    <p>Please note:</p>
                                    <ul>
                                        <li>The pre-booking fee is non-refundable.</li>
                                        <li>Your application will be processed only after successful payment.</li>
                                        <li>All details provided are subject to verification.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button type="button" class="btn btn-prev">Previous</button>
                        <button type="submit" class="btn">Submit Application</button>
                    </div>
                </div>
                <!-- Step 4: Application Receipt -->
                <div id="step-4" class="form-step success-message">
                    <i class="fas fa-check-circle"></i>
                    <h2>Application Submitted Successfully!</h2>
                    <p>Thank you for submitting your application for the MBA program at Global College of Engineering & Technology. Your application number is <strong><span id="finalAppNumber"></span></strong>.</p>
                    <p>A detailed receipt and confirmation have been sent to your registered email address.</p>
                    <button type="button" class="btn" id="downloadReceiptBtn">Download Application Receipt</button>
                    <button type="button" class="btn btn-secondary" id="newFormBtn">Submit Another Application</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Message Box Overlay -->
    <div class="message-box-overlay" id="messageBoxOverlay">
        <div class="message-box" id="messageBox">
            <h3></h3>
            <p></p>
            <button type="button" class="btn" id="messageBoxBtn">OK</button>
        </div>
    </div>

    <!-- Application Receipt Modal (for PDF generation) -->
    <div class="application-receipt" id="applicationReceipt">
        <div class="receipt-header">
            <div class="logo">
                <div class="logo-icon-circle" style="width: 60px; height: 60px; margin-right: 15px;">
                    <i class="fas fa-graduation-cap" style="font-size: 30px;"></i>
                </div>
                <div class="logo-text" style="text-align: center;">
                    <h2 style="font-size: 24px; color: var(--blue-college);">GLOBAL COLLEGE OF ENGINEERING & TECHNOLOGY</h2>
                    <p style="font-size: 14px; color: #555;">MBA Admission Receipt</p>
                </div>
            </div>
        </div>
        <div class="receipt-section">
            <h3 class="receipt-section-title">Applicant Details</h3>
            <div class="receipt-details">
                <div class="receipt-row">
                    <span class="receipt-label">Application Number:</span>
                    <span class="receipt-value" id="receiptAppNumber"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Date of Application:</span>
                    <span class="receipt-value" id="receiptDate"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Full Name:</span>
                    <span class="receipt-value" id="receiptFullName"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Date of Birth:</span>
                    <span class="receipt-value" id="receiptDob"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Father's Name:</span>
                    <span class="receipt-value" id="receiptFatherName"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Mother's Name:</span>
                    <span class="receipt-value" id="receiptMotherName"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Email:</span>
                    <span class="receipt-value" id="receiptEmail"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Phone:</span>
                    <span class="receipt-value" id="receiptPhone"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Preferred Specialization:</span>
                    <span class="receipt-value" id="receiptSpecialization"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Admission Type:</span>
                    <span class="receipt-value" id="receiptAdmissionType"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Degree College:</span>
                    <span class="receipt-value" id="receiptDegreeCollege"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Degree University:</span>
                    <span class="receipt-value" id="receiptDegreeUniversity"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Degree Percentage:</span>
                    <span class="receipt-value" id="receiptDegreePercentage"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Degree Year of Passing:</span>
                    <span class="receipt-value" id="receiptDegreeYear"></span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Undergraduate Stream:</span>
                    <span class="receipt-value" id="receiptDegreeStream"></span>
                </div>
            </div>
        </div>
        <div class="receipt-section">
            <h3 class="receipt-section-title">Payment Details</h3>
            <div class="payment-details">
                <div class="receipt-row">
                    <span class="receipt-label">Fee Type:</span>
                    <span class="receipt-value">Pre-Booking Fee</span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Amount Paid:</span>
                    <span class="receipt-value">₹1,000.00</span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Transaction ID:</span>
                    <span class="receipt-value" id="receiptTransactionId">N/A</span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Payment Date:</span>
                    <span class="receipt-value" id="receiptPaymentDate"></span>
                </div>
            </div>
        </div>
        <div class="receipt-footer">
            <p>This is a system-generated receipt. No signature is required.</p>
        </div>
        <div class="signature-area">
            <div class="signature-line">
                College Representative
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('mbaAdmissionForm'); // Changed form ID
            const steps = document.querySelectorAll('.form-step');
            const stepIndicators = document.querySelectorAll('.step-indicator');
            const progressBar = document.getElementById('progressBar');
            let currentStep = 1; // Start at Step 1

            const photoUpload = document.getElementById('photoUpload');
            const photoPreview = document.getElementById('photoPreview');
            const photoText = document.getElementById('photoText');

            const receiptUpload = document.getElementById('receiptUpload');
            const receiptPreview = document.getElementById('receiptPreview');
            const receiptPreviewContainer = document.querySelector('#upi-qr .receipt-preview-container'); // Specific to UPI/QR
            const receiptUploadCard = document.getElementById('receiptUploadCard'); // For card payment receipt
            const receiptPreviewCard = document.getElementById('receiptPreviewCard'); // For card payment receipt preview
            const receiptPreviewContainerCard = document.querySelector('#card-payment-form .receipt-preview-container'); // Specific to Card

            const entranceExamDetails = document.getElementById('entranceExamDetails');
            const admissionTypeQualified = document.getElementById('admissionTypeQualified');

            const paymentMethods = document.querySelectorAll('.method-btn');
            const paymentForms = document.querySelectorAll('.payment-form');

            const downloadReceiptBtn = document.getElementById('downloadReceiptBtn');
            const applicationReceipt = document.getElementById('applicationReceipt');
            const newFormBtn = document.getElementById('newFormBtn');

            const messageBoxOverlay = document.getElementById('messageBoxOverlay');
            const messageBox = document.getElementById('messageBox');
            const messageBoxTitle = messageBox.querySelector('h3');
            const messageBoxText = messageBox.querySelector('p');
            const messageBoxBtn = document.getElementById('messageBoxBtn');

            let isPaymentCompleted = false;
            let transactionId = '';

            // Function to show a custom message box
            function showMessageBox(title, message, type = 'info') {
                messageBoxTitle.textContent = title;
                messageBoxText.textContent = message;
                messageBox.className = 'message-box';
                if (type !== 'info') {
                    messageBox.classList.add(type);
                }
                messageBoxOverlay.classList.add('active');
            }

            // Close message box
            messageBoxBtn.addEventListener('click', () => {
                messageBoxOverlay.classList.remove('active');
            });

            // Form navigation logic
            document.querySelectorAll('.btn-next').forEach(button => {
                button.addEventListener('click', () => {
                    // Validate current step before moving on
                    if (validateStep(currentStep)) {
                        steps[currentStep - 1].classList.remove('active');
                        stepIndicators[currentStep - 1].classList.add('completed');
                        currentStep++;
                        if (currentStep <= steps.length) { // Check if it's within bounds
                            showStep(currentStep);
                        }
                    }
                });
            });

            document.querySelectorAll('.btn-prev').forEach(button => {
                button.addEventListener('click', () => {
                    if (currentStep > 1) {
                        steps[currentStep - 1].classList.remove('active');
                        stepIndicators[currentStep - 1].classList.remove('active');
                        stepIndicators[currentStep - 2].classList.remove('completed'); // Remove completed from previous step
                        currentStep--;
                        showStep(currentStep);
                    }
                });
            });

            function updateProgressBar() {
                const progress = ((currentStep - 1) / (steps.length - 1)) * 100;
                progressBar.style.width = progress + '%';
            }

            function showStep(stepNum) {
                // Hide all steps first
                steps.forEach(step => step.classList.remove('active'));
                // Hide success message and receipt by default
                document.getElementById('step-4').classList.remove('active');
                applicationReceipt.style.display = 'none';

                // Show the current step
                document.getElementById(`step-${stepNum}`).classList.add('active');

                // Update step indicators
                stepIndicators.forEach((indicator, index) => {
                    indicator.classList.remove('active', 'completed');
                    if (index + 1 < stepNum) {
                        indicator.classList.add('completed');
                    } else if (index + 1 === stepNum) {
                        indicator.classList.add('active');
                    }
                });

                // Manage navigation buttons visibility
                const prevBtn = document.querySelector(`#step-${stepNum} .btn-prev`);
                const nextBtn = document.querySelector(`#step-${stepNum} .btn-next`);
                const submitBtn = document.querySelector(`#step-${stepNum} .btn[type="submit"]`);

                if (prevBtn) {
                    prevBtn.style.visibility = stepNum === 1 ? 'hidden' : 'visible';
                }
                if (nextBtn) {
                    nextBtn.style.display = (stepNum === 1 || stepNum === 2) ? 'inline-block' : 'none';
                }
                if (submitBtn) {
                    submitBtn.style.display = (stepNum === 3) ? 'inline-block' : 'none';
                }

                updateProgressBar();
            }

            function validateStep(stepIndex) {
                const currentFormStep = steps[stepIndex - 1]; // Adjust for 0-based index
                const requiredInputs = currentFormStep.querySelectorAll('[required]');
                let allValid = true;

                requiredInputs.forEach(input => {
                    if (input.offsetParent !== null) { // Check if the input is visible (e.g., not hidden by admission type)
                        if (!input.value.trim()) {
                            allValid = false;
                            input.style.borderColor = 'red';
                        } else {
                            input.style.borderColor = '#ced4da';
                        }
                        // Specific validation for email
                        if (input.type === 'email' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input.value)) {
                            allValid = false;
                            input.style.borderColor = 'red';
                        }
                        // Specific validation for numbers/percentages
                        if (input.type === 'number' && (parseFloat(input.value) < parseFloat(input.min) || parseFloat(input.value) > parseFloat(input.max))) {
                             allValid = false;
                             input.style.borderColor = 'red';
                        }
                    }
                });

                // Special validation for radio buttons (specialization and admission type)
                if (stepIndex === 2) {
                    const specializationSelected = document.querySelector('input[name="specialization"]:checked');
                    if (!specializationSelected) {
                        allValid = false;
                        document.querySelector('.specialization').style.border = '1px solid red';
                    } else {
                        document.querySelector('.specialization').style.border = '1px solid #e0d7ff'; // Reset border
                    }

                    const admissionTypeSelected = document.querySelector('input[name="admissionType"]:checked');
                    if (!admissionTypeSelected) {
                        allValid = false;
                        document.querySelector('.exam-section .specialization-grid').style.border = '1px solid red';
                    } else {
                        document.querySelector('.exam-section .specialization-grid').style.border = 'none'; // Reset border
                    }
                }

                // Special validation for Step 3 (Uploads and Payment)
                if (stepIndex === 3) {
                    const photoFile = document.getElementById('photoUpload').files[0];
                    if (!photoFile) {
                        allValid = false;
                        document.getElementById('photoUpload').style.borderColor = 'red';
                        showMessageBox('Upload Required', 'Please upload your passport-size photograph.', 'error');
                    } else {
                        document.getElementById('photoUpload').style.borderColor = '#ced4da';
                    }

                    if (!isPaymentCompleted) {
                        allValid = false;
                        showMessageBox('Payment Required', 'Please complete the pre-booking payment first.', 'error');
                    } else {
                        // Check if receipt upload section is visible and if a file is uploaded
                        const activePaymentForm = document.querySelector('.payment-form.active');
                        const currentReceiptUploadSection = activePaymentForm.querySelector('.receipt-upload-section');
                        if (currentReceiptUploadSection && currentReceiptUploadSection.style.display !== 'none') {
                            const currentReceiptInput = currentReceiptUploadSection.querySelector('input[type="file"]');
                            if (!currentReceiptInput || !currentReceiptInput.files[0]) {
                                allValid = false;
                                currentReceiptInput.style.borderColor = 'red';
                                showMessageBox('Receipt Required', 'Please upload your payment receipt/screenshot.', 'error');
                            } else {
                                currentReceiptInput.style.borderColor = '#ced4da';
                            }
                        }
                    }
                }

                if (!allValid) {
                    // Scroll to the first invalid field
                    const firstInvalid = currentFormStep.querySelector(':invalid');
                    if (firstInvalid) {
                        firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
                return allValid;
            }

            // Photo upload preview logic
            photoUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        photoPreview.src = e.target.result;
                        photoPreview.style.display = 'block';
                        photoText.style.display = 'none';
                        photoPreview.nextElementSibling.style.display = 'none'; // Hide camera icon
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Receipt upload preview logic (for UPI/QR)
            receiptUpload.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        receiptPreview.src = e.target.result;
                        receiptPreview.style.display = 'block';
                        receiptPreview.nextElementSibling.style.display = 'none'; // Hide upload icon
                        receiptPreview.nextElementSibling.nextElementSibling.textContent = file.name;
                        receiptPreviewContainer.style.display = 'flex';
                    };
                    reader.readAsDataURL(file);
                } else {
                    receiptPreview.src = '';
                    receiptPreview.style.display = 'none';
                    receiptPreview.nextElementSibling.style.display = 'block'; // Show upload icon
                    receiptPreview.nextElementSibling.nextElementSibling.textContent = 'Upload Receipt';
                    receiptPreviewContainer.style.display = 'none';
                }
            });

            // Receipt upload preview logic (for Card)
            receiptUploadCard.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        receiptPreviewCard.src = e.target.result;
                        receiptPreviewCard.style.display = 'block';
                        receiptPreviewCard.nextElementSibling.style.display = 'none'; // Hide upload icon
                        receiptPreviewCard.nextElementSibling.nextElementSibling.textContent = file.name;
                        receiptPreviewContainerCard.style.display = 'flex';
                    };
                    reader.readAsDataURL(file);
                } else {
                    receiptPreviewCard.src = '';
                    receiptPreviewCard.style.display = 'none';
                    receiptPreviewCard.nextElementSibling.style.display = 'block'; // Show upload icon
                    receiptPreviewCard.nextElementSibling.nextElementSibling.textContent = 'Upload Receipt';
                    receiptPreviewContainerCard.style.display = 'none';
                }
            });


            // Toggle entrance exam details based on admission type
            document.querySelectorAll('input[name="admissionType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'qualified') {
                        entranceExamDetails.style.display = 'block';
                        document.getElementById('examName').setAttribute('required', 'required');
                        document.getElementById('examYear').setAttribute('required', 'required');
                        document.getElementById('rank').setAttribute('required', 'required');
                        document.getElementById('score').setAttribute('required', 'required');
                    } else {
                        entranceExamDetails.style.display = 'none';
                        document.getElementById('examName').removeAttribute('required');
                        document.getElementById('examYear').removeAttribute('required');
                        document.getElementById('rank').removeAttribute('required');
                        document.getElementById('score').removeAttribute('required');
                        // Clear values when hidden
                        document.getElementById('examName').value = '';
                        document.getElementById('examYear').value = '';
                        document.getElementById('rank').value = '';
                        document.getElementById('score').value = '';
                    }
                });
            });

            // Payment method toggle logic
            paymentMethods.forEach(method => {
                method.addEventListener('click', () => {
                    paymentMethods.forEach(btn => btn.classList.remove('active'));
                    method.classList.add('active');

                    paymentForms.forEach(form => form.classList.remove('active'));
                    document.getElementById(method.dataset.target).classList.add('active');

                    // Reset payment status and receipt upload when switching methods
                    isPaymentCompleted = false;
                    document.querySelectorAll('.receipt-upload-section').forEach(section => section.style.display = 'none');
                    document.querySelectorAll('.receipt-preview-container').forEach(container => {
                        container.style.display = 'none';
                        const img = container.querySelector('img');
                        const text = container.querySelector('.receipt-preview-text');
                        const icon = container.querySelector('i');
                        if (img) img.src = ''; img.style.display = 'none';
                        if (text) text.textContent = 'Upload Receipt'; text.style.display = 'block';
                        if (icon) icon.style.display = 'block';
                    });
                    document.getElementById('receiptUpload').value = '';
                    document.getElementById('receiptUploadCard').value = '';

                    // Update QR code when UPI QR method is selected
                    if (method.dataset.target === 'upi-qr') {
                        updateQRCode();
                    }
                });
            });

            // Function to update the QR code image source
            function updateQRCode() {
                const amount = parseFloat(document.getElementById('totalAmount').textContent.replace('₹', '').replace(',', '')).toFixed(2);
                const merchantUpiId = "9441459310@ybl"; // Replace with your actual UPI ID
                const merchantName = "Global College of Engineering & Technology";
                const transactionNote = "MBA Pre-Booking Payment";
                
                // Construct UPI deep link
                const upiUrl = `upi://pay?pa=${merchantUpiId}&pn=${encodeURIComponent(merchantName)}&am=${amount}&cu=INR&tn=${encodeURIComponent(transactionNote)}`;
                
                // Use a QR code API to generate the image
                document.getElementById('dynamic-qr-code').src = 
                    `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upiUrl)}`;
                
                // Update the amount displayed in QR instructions
                document.getElementById('qr-amount-display').textContent = amount;
            }

            // Simulate payment processing (triggered by buttons inside payment forms)
            window.simulatePayment = function(methodType) {
                // Basic validation for card details if card payment is selected
                if (methodType === 'card') {
                    const cardNumber = document.getElementById('card-number');
                    const expiry = document.getElementById('expiry');
                    const cvv = document.getElementById('cvv');
                    if (!cardNumber.value.trim() || !expiry.value.trim() || !cvv.value.trim()) {
                        showMessageBox('Input Error', 'Please fill in all card details.', 'error');
                        cardNumber.style.borderColor = 'red';
                        expiry.style.borderColor = 'red';
                        cvv.style.borderColor = 'red';
                        return;
                    } else {
                        cardNumber.style.borderColor = '#ced4da';
                        expiry.style.borderColor = '#ced4da';
                        cvv.style.borderColor = '#ced4da';
                    }
                }

                isPaymentCompleted = true;
                transactionId = 'TXN' + Math.floor(1000000000 + Math.random() * 9000000000); // Generate a dummy transaction ID

                // Show the appropriate receipt upload section
                const activePaymentForm = document.querySelector('.payment-form.active');
                const currentReceiptUploadSection = activePaymentForm.querySelector('.receipt-upload-section');
                if (currentReceiptUploadSection) {
                    currentReceiptUploadSection.style.display = 'block';
                    // Scroll to the receipt upload section
                    currentReceiptUploadSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
                showMessageBox('Payment Successful', 'Your payment has been simulated successfully. Please upload your receipt to proceed.', 'success');
            };


            function handleFormSubmit() {
                // Here you would typically send the form data to a server.
                // For this example, we'll just simulate a successful submission.

                // Simulate server-side processing
                setTimeout(() => {
                    document.getElementById('step-3').classList.remove('active');
                    document.getElementById('step-4').classList.add('active');
                    stepIndicators[2].classList.add('completed');
                    stepIndicators[3].classList.add('active');
                    updateProgressBar();

                    // Populate receipt data
                    populateReceipt();
                }, 500); // Wait for 0.5 second to simulate server processing
            }

            function populateReceipt() {
                const formData = {
                    fullName: document.getElementById('fullName').value,
                    dob: document.getElementById('dob').value,
                    fatherName: document.getElementById('fatherName').value,
                    motherName: document.getElementById('motherName').value,
                    degreeCollege: document.getElementById('degreeCollege').value, // Changed from tenthBoard
                    degreeUniversity: document.getElementById('degreeUniversity').value, // Changed from tenthPercentage
                    degreePercentage: document.getElementById('degreePercentage').value, // Changed from intermediateCollege
                    degreeYear: document.getElementById('degreeYear').value, // Changed from intermediateBoard
                    degreeStream: document.getElementById('degreeStream').value, // Changed from intermediatePercentage
                    intermediatePercentage: document.getElementById('intermediatePercentage').value, // Kept for 12th
                    specialization: document.querySelector('input[name="specialization"]:checked').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    address: document.getElementById('address').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    pincode: document.getElementById('pincode').value,
                    admissionType: document.querySelector('input[name="admissionType"]:checked').value,
                    examName: document.getElementById('examName').value,
                    examYear: document.getElementById('examYear').value,
                    rank: document.getElementById('rank').value,
                    score: document.getElementById('score').value
                };

                const today = new Date();
                const formattedDate = today.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const appId = 'GCET-MBA-' + today.getFullYear() + '-' + Math.floor(10000 + Math.random() * 90000); // Changed App ID prefix

                document.getElementById('finalAppNumber').textContent = appId;
                document.getElementById('receiptAppNumber').textContent = appId;
                document.getElementById('receiptDate').textContent = formattedDate;
                document.getElementById('receiptFullName').textContent = formData.fullName;
                document.getElementById('receiptDob').textContent = formData.dob;
                document.getElementById('receiptFatherName').textContent = formData.fatherName;
                document.getElementById('receiptMotherName').textContent = formData.motherName;
                document.getElementById('receiptEmail').textContent = formData.email;
                document.getElementById('receiptPhone').textContent = formData.phone;
                
                const specializationMap = {
                    'finance': 'Finance',
                    'marketing': 'Marketing',
                    'hr': 'Human Resources',
                    'operations': 'Operations Management',
                    'business_analytics': 'Business Analytics',
                    'it_management': 'IT Management',
                    'other': 'Other'
                };
                document.getElementById('receiptSpecialization').textContent = specializationMap[formData.specialization] || formData.specialization;
                document.getElementById('receiptAdmissionType').textContent = formData.admissionType === 'qualified' ? 'Entrance Exam Qualified' : 'Paid Admission (Management Quota)';
                
                // MBA specific academic fields
                document.getElementById('receiptDegreeCollege').textContent = formData.degreeCollege;
                document.getElementById('receiptDegreeUniversity').textContent = formData.degreeUniversity;
                document.getElementById('receiptDegreePercentage').textContent = formData.degreePercentage + '%';
                document.getElementById('receiptDegreeYear').textContent = formData.degreeYear;
                document.getElementById('receiptDegreeStream').textContent = formData.degreeStream;
                document.getElementById('receiptIntermediatePercentage').textContent = formData.intermediatePercentage + '%'; // Still show 12th percentage


                document.getElementById('receiptTransactionId').textContent = transactionId || 'N/A';
                document.getElementById('receiptPaymentDate').textContent = formattedDate;

                applicationReceipt.style.display = 'block'; // Show the receipt for PDF generation
            }

            // Download receipt functionality
            downloadReceiptBtn.addEventListener('click', async () => {
                const { jsPDF } = window.jspdf;
                const element = document.getElementById('applicationReceipt');

                // Temporarily show the receipt element if it's hidden for rendering
                const originalDisplay = element.style.display;
                element.style.display = 'block';

                // Use html2canvas to render the receipt as a canvas
                const canvas = await html2canvas(element, {
                    scale: 2, // Higher scale for better resolution
                    useCORS: true,
                });

                // Restore original display
                element.style.display = originalDisplay;

                const imgData = canvas.toDataURL('image/png');
                const doc = new jsPDF('p', 'mm', 'a4');
                const imgProps= doc.getImageProperties(imgData);
                const pdfWidth = doc.internal.pageSize.getWidth();
                const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;

                doc.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                doc.save('MBA-Admission-Receipt.pdf'); // Changed filename
            });

            // New form button functionality
            newFormBtn.addEventListener('click', () => {
                form.reset();
                isPaymentCompleted = false;
                transactionId = '';
                // Reset all custom UI states
                photoPreview.src = '';
                photoPreview.style.display = 'none';
                photoText.style.display = 'block';
                photoPreview.nextElementSibling.style.display = 'block'; // Show camera icon

                document.querySelectorAll('.receipt-upload-section').forEach(section => section.style.display = 'none');
                document.querySelectorAll('.receipt-preview-container').forEach(container => {
                    container.style.display = 'none';
                    const img = container.querySelector('img');
                    const text = container.querySelector('.receipt-preview-text');
                    const icon = container.querySelector('i');
                    if (img) img.src = ''; img.style.display = 'none';
                    if (text) text.textContent = 'Upload Receipt'; text.style.display = 'block';
                    if (icon) icon.style.display = 'block';
                });
                document.getElementById('receiptUpload').value = '';
                document.getElementById('receiptUploadCard').value = '';

                // Reset border colors for all inputs
                document.querySelectorAll('input, select, textarea').forEach(input => {
                    input.style.borderColor = '#ced4da';
                });
                document.querySelector('.specialization').style.border = '1px solid #e0d7ff';
                document.querySelector('.exam-section .specialization-grid').style.border = 'none';

                // Reset payment method to QR and update admission type display
                document.querySelector('.method-btn[data-target="upi-qr"]').click(); // Simulate click to reset payment method UI
                admissionTypeQualified.checked = true; // Set default admission type
                document.querySelector('input[name="admissionType"]').dispatchEvent(new Event('change')); // Trigger change to update UI

                currentStep = 1;
                showStep(currentStep); // Go back to the first step
            });


            // Input validation for phone and pincode
            const phoneInput = document.getElementById('phone');
            phoneInput.addEventListener('input', function() {
                this.value = this.value.replace(/[^0-9+]/g, '');
                if (this.value.length > 15) {
                    this.value = this.value.slice(0, 15);
                }
            });
            
            const pincodeInput = document.getElementById('pincode');
            pincodeInput.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '');
                if (this.value.length > 6) {
                    this.value = this.value.slice(0, 6);
                }
            });

            // Card number formatting
            const cardNumberInput = document.getElementById('card-number');
            cardNumberInput.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '').replace(/(.{4})/g, '$1 ').trim();
            });

            // Expiry date formatting MM/YY
            const expiryDateInput = document.getElementById('expiry');
            expiryDateInput.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                if (value.length > 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                this.value = value;
            });

            // CVV validation
            const cvvInput = document.getElementById('cvv');
            cvvInput.addEventListener('input', function() {
                this.value = this.value.replace(/\D/g, '');
            });

            // Initial setup on page load
            document.querySelector('input[name="admissionType"]').dispatchEvent(new Event('change')); // Trigger change to set initial exam details visibility
            document.querySelector('.method-btn[data-target="upi-qr"]').click(); // Set QR as default payment method
            showStep(currentStep); // Display the first step on load
        });
    </script>
</body>
</html>
